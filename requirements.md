> 基于一个 **已存在的静态前端 UI**，请补充实现实时房间与计分逻辑，**不得修改 UI 结构和交互样式**。

---

## 一、用户创建规则（已简化）

1. 用户创建或进入房间时：

   * 服务端 **自动创建玩家**
   * 不需要用户输入任何信息
2. 玩家属性：

   * `id`（服务端生成）
   * `avatar`（从预设动物列表中随机分配）
   * `name` = 动物名称（由头像决定）
   * `score`（初始为 0）
   * `isHost`

---

## 二、房间与会话

* 房间通过 **4 位数字 roomId** 区分
* 第一个进入房间的玩家为 **房主**
* 客户端使用 `localStorage` 保存：

  * `roomId`
  * `playerId`
* 页面刷新或重开：

  * 使用 `playerId` 自动 rejoin
  * 恢复原玩家与分数状态

---

## 三、转分逻辑

* 点击他人头像触发转分
* A → B 转 X：

  * A.score -= X
  * B.score += X
* 不允许给自己转分
* 转分由服务端处理，必须是原子操作
* 结果广播至房间内所有玩家

---

## 四、实时同步

* 使用 WebSocket
* 房间状态变化立即广播
* 新加入 / 重连玩家接收完整房间状态

---

## 五、房主权限

* **仅房主**可结束房间
* 结束后进入结算状态
* 非房主只读

---

## 六、约束

* 不重构 UI
* 不引入数据库
* 不增加用户输入项
* 不新增页面

---
